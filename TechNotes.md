# Инструкция по развертыванию SW Task Manager Frontend

## Общая информация

SW Task Manager - это современное веб-приложение для управления задачами с поддержкой работы с электронной почтой. Данная инструкция содержит подробное описание процесса развертывания фронтенд-части приложения на Windows с нуля.

**Технологический стек:**
- React 18
- TypeScript
- Vite
- TailwindCSS
- Axios

---

## Шаг 1: Установка необходимого программного обеспечения

### 1.1 Установка Node.js

1. Перейдите на официальный сайт Node.js: https://nodejs.org/
2. Скачайте LTS (Long Term Support) версию для Windows (рекомендуется версия 20.x или выше)
3. Запустите установщик `node-vXX.XX.XX-x64.msi`
4. Следуйте инструкциям установщика:
   - Нажмите "Next" на всех экранах
   - Примите лицензионное соглашение
   - Выберите путь установки (рекомендуется использовать путь по умолчанию)
   - Обязательно установите галочку "Automatically install the necessary tools"
   - Нажмите "Install" и дождитесь завершения
5. После установки нажмите "Finish"

**Проверка установки:**
1. Откройте командную строку (CMD) или PowerShell (нажмите Win+R, введите `cmd` или `powershell`)
2. Введите следующие команды:
   ```bash
   node --version
   npm --version
   ```
3. Должны отобразиться версии Node.js и npm (например, v20.10.0 и 10.2.3)

### 1.2 Установка Git (опционально, для клонирования репозитория)

1. Скачайте Git с https://git-scm.com/download/win
2. Запустите установщик и следуйте инструкциям
3. При выборе текстового редактора рекомендуется выбрать Visual Studio Code или Notepad++
4. Нажмите "Next" до завершения установки

**Проверка установки:**
```bash
git --version
```

---

## Шаг 2: Получение исходного кода

### Вариант 2.1: Распаковка архива

1. Распакуйте архив с исходным кодом проекта
2. Перейдите в папку с распакованным проектом

### Вариант 2.2: Клонирование из репозитория (если используется Git)

1. Откройте командную строку или PowerShell
2. Перейдите в нужную директорию:
   ```bash
   cd C:\Projects
   ```
3. Клонируйте репозиторий (замените URL на ваш):
   ```bash
   git clone <URL_РЕПОЗИТОРИЯ>
   ```
4. Перейдите в папку проекта:
   ```bash
   cd frontend
   ```

---

## Шаг 3: Установка зависимостей проекта

1. Откройте командную строку (CMD) или PowerShell
2. Перейдите в папку с проектом:
   ```bash
   cd C:\путь\к\вашему\проекту\frontend
   ```
3. Установите все необходимые зависимости:
   ```bash
   npm install
   ```

**Что происходит:** npm загрузит и установит все библиотеки, указанные в `package.json`:
- React и React-DOM (пользовательский интерфейс)
- TypeScript (типизация)
- Vite (инструменты сборки и разработки)
- TailwindCSS (стили)
- Axios (HTTP-запросы)
- И другие зависимости

**Примечание:** Установка может занять несколько минут (5-15 минут в зависимости от скорости интернета).

---

## Шаг 4: Настройка подключения к бэкенду

### 4.1 Определение URL бэкенда

Перед сборкой проекта необходимо настроить адрес бэкенд-сервера. Откройте файл:

```
src/services/api.ts
```

Найдите строку:
```typescript
baseURL: 'http://localhost:8000/api/v1',
```

Измените `http://localhost:8000` на адрес вашего бэкенд-сервера.

**Примеры:**
- Для локального сервера: `http://localhost:8000/api/v1`
- Для удаленного сервера: `http://192.168.1.100:8000/api/v1`
- Для продакшн-сервера: `https://api.yourdomain.com/api/v1`

### 4.2 Настройка прокси для разработки (опционально)

Если вы запускаете фронтенд и бэкенд на разных портах, откройте файл:

```
vite.config.ts
```

Настройте прокси:
```typescript
proxy: {
  '/api': {
    target: 'http://ваш-backend-сервер:8000',
    changeOrigin: true,
  },
}
```

---

## Шаг 5: Сборка проекта для продакшена

1. Убедитесь, что вы находитесь в папке проекта
2. Запустите команду сборки:
   ```bash
   npm run build
   ```

**Что происходит:**
- TypeScript проверяет код на ошибки
- Vite оптимизирует и минифицирует код
- Все файлы собираются в папку `dist`
- Создается продакшн-версия приложения

**Время сборки:** 1-3 минуты в зависимости от мощности компьютера

**Результат:** В папке проекта появится папка `dist` со всеми файлами для размещения на веб-сервере.

---

## Шаг 6: Размещение на веб-сервере

### Вариант 6.1: Локальный сервер (для тестирования)

Для тестирования собранного приложения локально:

1. Используйте встроенный preview сервер Vite:
   ```bash
   npm run preview
   ```
2. Откройте браузер и перейдите на: `http://localhost:4173`

### Вариант 6.2: Apache (для Windows)

1. **Установка XAMPP:**
   - Скачайте XAMPP с https://www.apachefriends.org/
   - Установите в папку `C:\xampp`
   - Запустите Apache Control Panel
   - Нажмите "Start" рядом с Apache

2. **Размещение проекта:**
   - Скопируйте ВСЕ содержимое папки `dist` в `C:\xampp\htdocs\swtaskmanager`
   - Откройте браузер и перейдите на: `http://localhost/swtaskmanager`

3. **Настройка HTTPS (опционально):**
   - Откройте `C:\xampp\apache\conf\extra\httpd-ssl.conf`
   - Настройте SSL-сертификат
   - Перезапустите Apache

### Вариант 6.3: Nginx (для Windows)

1. **Установка Nginx:**
   - Скачайте Nginx для Windows: http://nginx.org/en/download.html
   - Распакуйте в `C:\nginx`

2. **Настройка конфигурации:**
   - Откройте `C:\nginx\conf\nginx.conf`
   - Добавьте конфигурацию:
   ```nginx
   server {
       listen 80;
       server_name localhost;
       
       root C:/путь/к/вашему/проекту/frontend/dist;
       index index.html;
       
       location / {
           try_files $uri $uri/ /index.html;
       }
       
       location /api {
           proxy_pass http://your-backend-server:8000;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
       }
   }
   ```

3. **Запуск Nginx:**
   ```bash
   cd C:\nginx
   start nginx
   ```

4. Откройте браузер: `http://localhost`

### Вариант 6.4: IIS (Internet Information Services)

1. **Включение IIS:**
   - Откройте "Панель управления" → "Программы" → "Включение или отключение компонентов Windows"
   - Установите галочки:
     - Internet Information Services
     - World Wide Web Services
     - Application Development Features → ASP.NET
   - Нажмите "OK" и дождитесь установки

2. **Создание сайта:**
   - Откройте "Диспетчер служб IIS"
   - Правой кнопкой на "Sites" → "Add Website"
   - Имя: `SWTaskManager`
   - Physical path: путь к папке `dist`
   - Port: `80` (или другой свободный порт)
   - Нажмите "OK"

3. **Настройка URL Rewrite:**
   - Установите URL Rewrite модуль: https://www.iis.net/downloads/microsoft/url-rewrite
   - Создайте файл `web.config` в папке `dist`:
   ```xml
   <?xml version="1.0" encoding="UTF-8"?>
   <configuration>
       <system.webServer>
           <rewrite>
               <rules>
                   <rule name="React Routes" stopProcessing="true">
                       <match url=".*" />
                       <conditions logicalGrouping="MatchAll">
                           <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                           <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                       </conditions>
                       <action type="Rewrite" url="/" />
                   </rule>
               </rules>
           </rewrite>
       </system.webServer>
   </configuration>
   ```

4. Откройте браузер: `http://localhost`

---

## Шаг 7: Использование приложения в режиме разработки

Если вы хотите запустить приложение в режиме разработки с hot-reload:

1. Убедитесь, что бэкенд-сервер запущен
2. В командной строке выполните:
   ```bash
   npm run dev
   ```
3. Откройте браузер: `http://localhost:5173`

**Режим разработки предоставляет:**
- Автоматическую перезагрузку при изменении кода
- Подробные сообщения об ошибках
- Быструю сборку

---

## Шаг 8: Проверка работоспособности

После развертывания выполните следующие проверки:

1. **Доступность приложения:**
   - Откройте браузер
   - Перейдите на адрес вашего сервера
   - Должна загрузиться страница авторизации

2. **Проверка консоли браузера:**
   - Нажмите F12 для открытия Developer Tools
   - Перейдите на вкладку "Console"
   - Не должно быть ошибок, связанных с загрузкой ресурсов

3. **Проверка Network:**
   - В Developer Tools перейдите на вкладку "Network"
   - Попробуйте войти в систему
   - Проверьте, что запросы к `/api/v1/auth/login` выполняются успешно

4. **Функциональное тестирование:**
   - Войдите в систему с тестовыми учетными данными
   - Проверьте отображение Dashboard
   - Проверьте загрузку писем
   - Проверьте работу с шаблонами

---

## Возможные проблемы и их решение

### Проблема 1: "npm не является внутренней или внешней командой"

**Решение:** Node.js не установлен или не добавлен в PATH
- Переустановите Node.js
- При установке обязательно выберите "Add to PATH"

### Проблема 2: Ошибки при установке зависимостей

**Решение:**
```bash
# Очистите кэш npm
npm cache clean --force

# Удалите папку node_modules и package-lock.json
rmdir /s node_modules
del package-lock.json

# Повторно установите зависимости
npm install
```

### Проблема 3: Порт 5173 уже занят

**Решение:**
- Остановите другой сервер на этом порту
- Или измените порт в `vite.config.ts`:
  ```typescript
  server: {
    port: 3000, // другой порт
  }
  ```

### Проблема 4: Ошибка "Cannot GET /" после деплоя

**Решение:** Настройте URL Rewrite для одностраничного приложения (SPA)
- Для Apache: создайте файл `.htaccess` в папке `dist`:
  ```apache
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
  ```
- Для Nginx: используйте конфигурацию из Варианта 6.3
- Для IIS: создайте `web.config` из Варианта 6.4

### Проблема 5: CORS ошибки

**Решение:** Настройте CORS на бэкенд-сервере, разрешив запросы с вашего фронтенд-домена

### Проблема 6: HTTPS не работает

**Решение:**
- Убедитесь, что SSL-сертификат правильно настроен на веб-сервере
- Проверьте, что все запросы к API используют HTTPS

---

## Дополнительная конфигурация

### Настройка переменных окружения (для продвинутых пользователей)

Для разных окружений (development, production, staging) можно использовать переменные окружения:

1. Установите пакет:
   ```bash
   npm install dotenv
   ```

2. Создайте файлы:
   - `.env.development` - для разработки
   - `.env.production` - для продакшена

3. Добавьте переменные:
   ```
   VITE_API_BASE_URL=http://localhost:8000/api/v1
   ```

4. Используйте в коде:
   ```typescript
   const api = axios.create({
     baseURL: import.meta.env.VITE_API_BASE_URL,
   });
   ```

---

## Структура проекта

```
frontend/
├── dist/                        # Собранные файлы для продакшена (создается после npm run build)
├── node_modules/                # Зависимости проекта (не коммитится)
├── src/
│   ├── components/              # React компоненты
│   │   ├── auth/
│   │   ├── layout/
│   │   └── LoginForm.tsx
│   ├── pages/                   # Страницы приложения
│   │   ├── AdminPanel.tsx      # Панель администратора
│   │   ├── Dashboard.tsx       # Главная панель
│   │   └── EmailsPage.tsx      # Страница писем
│   ├── services/                # Сервисы для API
│   │   ├── adminService.ts
│   │   ├── api.ts              # Базовый API клиент
│   │   ├── authService.ts
│   │   ├── emailService.ts
│   │   └── templateService.ts
│   ├── types/                   # TypeScript типы
│   │   ├── email.ts
│   │   ├── template.ts
│   │   └── user.ts
│   ├── utils/                   # Утилиты
│   │   └── emailCache.ts
│   ├── App.tsx                  # Главный компонент
│   ├── main.tsx                 # Точка входа
│   └── index.css                # Глобальные стили
├── .gitignore                   # Игнорируемые файлы Git
├── index.html                   # HTML шаблон
├── package.json                 # Зависимости и скрипты
├── package-lock.json            # Блокировка версий
├── postcss.config.js            # Конфигурация PostCSS
├── tailwind.config.js           # Конфигурация TailwindCSS
├── tsconfig.json                # Конфигурация TypeScript
├── tsconfig.node.json           # Конфигурация TypeScript для Node
├── vite.config.ts               # Конфигурация Vite
└── README.md                    # Документация проекта
```

---

## Команды для работы с проектом

| Команда | Описание |
|---------|----------|
| `npm install` | Установка всех зависимостей проекта |
| `npm run dev` | Запуск сервера разработки с hot-reload |
| `npm run build` | Сборка проекта для продакшена |
| `npm run preview` | Просмотр собранного проекта локально |
| `npm run build -- --watch` | Сборка в режиме наблюдения за изменениями |

---

## Требования к системе

**Минимальные требования:**
- Windows 10 или выше
- 4 GB RAM
- 500 MB свободного места на диске
- Интернет-соединение для установки зависимостей

**Рекомендуемые требования:**
- Windows 11
- 8 GB RAM
- 2 GB свободного места на диске
- Стабильное интернет-соединение

**Требования для Node.js:**
- Windows 10 версии 1809 и выше
- 64-битная версия процессора

---

## Поддержка и контакты

При возникновении проблем:
1. Проверьте консоль браузера (F12) на наличие ошибок
2. Проверьте логи веб-сервера
3. Убедитесь, что бэкенд-сервер работает корректно
4. Проверьте настройки файрвола Windows

---

## Дополнительные ресурсы

- **React:** https://react.dev/
- **TypeScript:** https://www.typescriptlang.org/
- **Vite:** https://vitejs.dev/
- **TailwindCSS:** https://tailwindcss.com/
- **Node.js:** https://nodejs.org/
- **npm:** https://www.npmjs.com/

---

**Дата создания инструкции:** 2024
**Версия:** 1.0
**Автор:** SW Task Manager Development Team

